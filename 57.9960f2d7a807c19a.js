"use strict";(self.webpackChunkskote=self.webpackChunkskote||[]).push([[57],{72057:(E,h,s)=>{s.r(h),s.d(h,{CompraModule:()=>Se});var l=s(86019),T=s(56225),e=s(83668),_=s(18798),v=s(34576),C=s(11950),r=s(49133),u=s(64762),p=s(1659),m=s.n(p),G=s(24017),f=s(20154),L=s(66548),P=s(15501),Z=s(868);function R(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"i",41),e.NdJ("click",function(){return e.CHM(t),e.oxw(3).restaurarAlerts()}),e.qZA()}}function H(o,a){if(1&o&&(e.TgZ(0,"div",39),e.YNc(1,R,1,0,"i",40),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",!t.siMuestraAlertas())}}function D(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",43),e.TgZ(1,"strong"),e._uU(2),e.qZA(),e._uU(3),e.TgZ(4,"button",44),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit;return e.oxw(2).CambiarAlert(i)}),e.qZA(),e.qZA()}if(2&o){const t=e.oxw().$implicit;e.Gre("alert alert-",t.type," alert-dismissible fade show"),e.xp6(2),e.Oqu("info"===t.type?"Importante!":"Precauci\xf3n!"),e.xp6(1),e.hij(" ",t.message," ")}}function $(o,a){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,D,5,5,"div",42),e.qZA()),2&o){const t=a.$implicit;e.xp6(1),e.Q6J("ngIf",t.show)}}function B(o,a){1&o&&(e.TgZ(0,"div"),e._UZ(1,"input",45),e.qZA())}function z(o,a){if(1&o&&(e.TgZ(0,"ng-option",46),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.nombre)}}function X(o,a){1&o&&(e.TgZ(0,"span"),e._uU(1," Requiere un proveedor"),e.qZA())}function K(o,a){1&o&&(e.TgZ(0,"span"),e._uU(1," Requiere un c\xf3digo de inicio"),e.qZA())}function W(o,a){1&o&&(e.TgZ(0,"span"),e._uU(1," C\xf3digo de inicio no puede ser negativo"),e.qZA())}function ee(o,a){1&o&&(e.TgZ(0,"span"),e._uU(1," Solamente se permiten numeros enteros "),e.qZA())}function te(o,a){1&o&&(e.TgZ(0,"span"),e._uU(1," Requiere un c\xf3digo de fin"),e.qZA())}function oe(o,a){1&o&&(e.TgZ(0,"span"),e._uU(1," C\xf3digo de fin no puede ser negativo"),e.qZA())}function ne(o,a){1&o&&(e.TgZ(0,"span"),e._uU(1," Solamente se permiten numeros enteros"),e.qZA())}function ae(o,a){1&o&&(e.TgZ(0,"span"),e._uU(1," Requiere una cantidad"),e.qZA())}function re(o,a){1&o&&(e.TgZ(0,"span"),e._uU(1," Cantidad no puede ser negativa"),e.qZA())}function ie(o,a){1&o&&(e.TgZ(0,"span"),e._uU(1," Solamente se permiten numeros enteros"),e.qZA())}function le(o,a){1&o&&(e.TgZ(0,"span"),e._uU(1," Requiere una fecha de compra"),e.qZA())}function se(o,a){1&o&&(e.TgZ(0,"span"),e._uU(1," Fecha no valida"),e.qZA())}function ce(o,a){1&o&&(e.TgZ(0,"span"),e._uU(1," Requiere una fecha de vencimiento"),e.qZA())}function de(o,a){1&o&&(e.TgZ(0,"span"),e._uU(1," Fecha no valida"),e.qZA())}function pe(o,a){1&o&&(e.TgZ(0,"span"),e._uU(1," Precio unitario requerido."),e.qZA())}function me(o,a){1&o&&(e.TgZ(0,"span"),e._uU(1," Precio unitario no puede ser negativo"),e.qZA())}function ue(o,a){1&o&&(e.TgZ(0,"span"),e._uU(1," Solamente se permiten numeros con dos decimales"),e.qZA())}function ge(o,a){1&o&&(e.TgZ(0,"span"),e._uU(1," Requiere un total de compra"),e.qZA())}function _e(o,a){1&o&&(e.TgZ(0,"span"),e._uU(1," Total compra no puede ser negativo"),e.qZA())}function fe(o,a){1&o&&(e.TgZ(0,"span"),e._uU(1," Solamente se permiten numeros con dos decimales"),e.qZA())}function Ze(o,a){1&o&&(e.TgZ(0,"span"),e._uU(1," Requiere una descripci\xf3n"),e.qZA())}function he(o,a){1&o&&(e.TgZ(0,"span"),e._uU(1," Digite m\xe1s de 2 caracteres "),e.qZA())}function Te(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",3),e.TgZ(1,"h5",4),e._uU(2),e.qZA(),e.YNc(3,H,2,1,"div",5),e.TgZ(4,"button",6),e.NdJ("click",function(){return e.CHM(t).$implicit.dismiss("Cross click")}),e.qZA(),e.qZA(),e.TgZ(5,"div",7),e.YNc(6,$,2,1,"div",8),e.TgZ(7,"form",9),e.NdJ("ngSubmit",function(){return e.CHM(t),e.oxw().guardar()}),e.TgZ(8,"div",10),e.YNc(9,B,2,0,"div",11),e.TgZ(10,"div",12),e.TgZ(11,"label",13),e._uU(12,"Proveedor: "),e.TgZ(13,"span",14),e._uU(14,"*"),e.qZA(),e.qZA(),e.TgZ(15,"ng-select",15),e.YNc(16,z,2,2,"ng-option",16),e.qZA(),e.TgZ(17,"div",17),e.YNc(18,X,2,0,"span",11),e.qZA(),e.qZA(),e.TgZ(19,"div",12),e.TgZ(20,"label",18),e._uU(21,"Factura:"),e.qZA(),e._UZ(22,"input",19),e.qZA(),e.TgZ(23,"div",12),e.TgZ(24,"label",20),e._uU(25,"C\xf3digo de inicio: "),e.TgZ(26,"span",14),e._uU(27,"*"),e.qZA(),e.qZA(),e.TgZ(28,"input",21),e.NdJ("keyup",function(){return e.CHM(t),e.oxw().getcantidad()}),e.qZA(),e.TgZ(29,"div",17),e.YNc(30,K,2,0,"span",11),e.YNc(31,W,2,0,"span",11),e.YNc(32,ee,2,0,"span",11),e.qZA(),e.qZA(),e.TgZ(33,"div",12),e.TgZ(34,"label",22),e._uU(35,"C\xf3digo de fin: "),e.TgZ(36,"span",14),e._uU(37,"*"),e.qZA(),e.qZA(),e.TgZ(38,"input",23),e.NdJ("keyup",function(){return e.CHM(t),e.oxw().getcantidad()}),e.qZA(),e.TgZ(39,"div",17),e.YNc(40,te,2,0,"span",11),e.YNc(41,oe,2,0,"span",11),e.YNc(42,ne,2,0,"span",11),e.qZA(),e.qZA(),e.TgZ(43,"div",12),e.TgZ(44,"label",24),e._uU(45,"Cantidad de vales: "),e.TgZ(46,"span",14),e._uU(47,"*"),e.qZA(),e.qZA(),e._UZ(48,"input",25),e.TgZ(49,"div",17),e.YNc(50,ae,2,0,"span",11),e.YNc(51,re,2,0,"span",11),e.YNc(52,ie,2,0,"span",11),e.qZA(),e.qZA(),e.TgZ(53,"div",12),e.TgZ(54,"label",26),e._uU(55,"Fecha de compra: "),e.TgZ(56,"span",14),e._uU(57,"*"),e.qZA(),e.qZA(),e._UZ(58,"input",27),e.TgZ(59,"div",17),e.YNc(60,le,2,0,"span",11),e.YNc(61,se,2,0,"span",11),e.qZA(),e.qZA(),e.TgZ(62,"div",12),e.TgZ(63,"label",28),e._uU(64,"Fecha de vencimiento de vales: "),e.TgZ(65,"span",14),e._uU(66,"*"),e.qZA(),e.qZA(),e._UZ(67,"input",29),e.TgZ(68,"div",17),e.YNc(69,ce,2,0,"span",11),e.YNc(70,de,2,0,"span",11),e.qZA(),e.qZA(),e.TgZ(71,"div",12),e.TgZ(72,"label",30),e._uU(73,"Precio unitario ($): "),e.TgZ(74,"span",14),e._uU(75,"*"),e.qZA(),e.qZA(),e.TgZ(76,"input",31),e.NdJ("keyup",function(){return e.CHM(t),e.oxw().getTotalCompra()}),e.qZA(),e.TgZ(77,"div",17),e.YNc(78,pe,2,0,"span",11),e.YNc(79,me,2,0,"span",11),e.YNc(80,ue,2,0,"span",11),e.qZA(),e.qZA(),e.TgZ(81,"div",12),e.TgZ(82,"label",32),e._uU(83,"Total compra ($): "),e.TgZ(84,"span",14),e._uU(85,"*"),e.qZA(),e.qZA(),e._UZ(86,"input",33),e.TgZ(87,"div",17),e.YNc(88,ge,2,0,"span",11),e.YNc(89,_e,2,0,"span",11),e.YNc(90,fe,2,0,"span",11),e.qZA(),e.qZA(),e.TgZ(91,"div",12),e.TgZ(92,"label",34),e._uU(93,"Descripci\xf3n: "),e.TgZ(94,"span",14),e._uU(95,"*"),e.qZA(),e.qZA(),e._UZ(96,"textarea",35),e.TgZ(97,"div",17),e.YNc(98,Ze,2,0,"span",11),e.YNc(99,he,2,0,"span",11),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(100,"div",36),e.TgZ(101,"button",37),e._uU(102),e.qZA(),e.TgZ(103,"button",38),e.NdJ("click",function(){return e.CHM(t).$implicit.close("Close click")}),e._uU(104),e.qZA(),e.qZA()}if(2&o){const t=e.oxw();let n,i,c,d,g,q,b,y,M,U,I,F,J,N,S,V,k,O,Q,w,Y;e.xp6(2),e.hij("",t.leyenda," compra de vales"),e.xp6(1),e.Q6J("ngIf",t.alerts),e.xp6(3),e.Q6J("ngForOf",t.alerts),e.xp6(1),e.Q6J("formGroup",t.formularioGeneral),e.xp6(2),e.Q6J("ngIf",null==t.compra?null:t.compra.id),e.xp6(6),e.Tol(t.esCampoValido("proveedor")),e.Q6J("selectOnTab",!0),e.xp6(1),e.Q6J("ngForOf",t.listProveedor),e.xp6(2),e.Q6J("ngIf",null==(n=t.formularioGeneral.get("proveedor"))||null==n.errors?null:n.errors.required),e.xp6(10),e.Tol(t.esCampoValido("codInicio")),e.Q6J("readonly",t.aplicarReadOnly),e.xp6(2),e.Q6J("ngIf",null==(i=t.formularioGeneral.get("codInicio"))||null==i.errors?null:i.errors.required),e.xp6(1),e.Q6J("ngIf",null==(c=t.formularioGeneral.get("codInicio"))||null==c.errors?null:c.errors.min),e.xp6(1),e.Q6J("ngIf",null==(d=t.formularioGeneral.get("codInicio"))||null==d.errors?null:d.errors.pattern),e.xp6(6),e.Tol(t.esCampoValido("codFin")),e.Q6J("readonly",t.aplicarReadOnly),e.xp6(2),e.Q6J("ngIf",null==(g=t.formularioGeneral.get("codFin"))||null==g.errors?null:g.errors.required),e.xp6(1),e.Q6J("ngIf",null==(q=t.formularioGeneral.get("codFin"))||null==q.errors?null:q.errors.min),e.xp6(1),e.Q6J("ngIf",null==(b=t.formularioGeneral.get("codFin"))||null==b.errors?null:b.errors.pattern),e.xp6(6),e.Tol(t.esCampoValido("cantidad")),e.xp6(2),e.Q6J("ngIf",null==(y=t.formularioGeneral.get("cantidad"))||null==y.errors?null:y.errors.required),e.xp6(1),e.Q6J("ngIf",null==(M=t.formularioGeneral.get("cantidad"))||null==M.errors?null:M.errors.min),e.xp6(1),e.Q6J("ngIf",null==(U=t.formularioGeneral.get("cantidad"))||null==U.errors?null:U.errors.pattern),e.xp6(6),e.Tol(t.esCampoValido("fechaCompra")),e.Q6J("readonly",t.aplicarReadOnly),e.xp6(2),e.Q6J("ngIf",null==(I=t.formularioGeneral.get("fechaCompra"))||null==I.errors?null:I.errors.required),e.xp6(1),e.Q6J("ngIf",null==(F=t.formularioGeneral.get("fechaCompra"))||null==F.errors?null:F.errors.pattern),e.xp6(6),e.Tol(t.esCampoValido("fechaVencimiento")),e.Q6J("readonly",t.aplicarReadOnly),e.xp6(2),e.Q6J("ngIf",null==(J=t.formularioGeneral.get("fechaVencimiento"))||null==J.errors?null:J.errors.required),e.xp6(1),e.Q6J("ngIf",null==(N=t.formularioGeneral.get("fechaVencimiento"))||null==N.errors?null:N.errors.pattern),e.xp6(6),e.Tol(t.esCampoValido("precioUnitario")),e.Q6J("readonly",t.aplicarReadOnly),e.xp6(2),e.Q6J("ngIf",null==(S=t.formularioGeneral.get("precioUnitario"))||null==S.errors?null:S.errors.required),e.xp6(1),e.Q6J("ngIf",null==(V=t.formularioGeneral.get("precioUnitario"))||null==V.errors?null:V.errors.min),e.xp6(1),e.Q6J("ngIf",null==(k=t.formularioGeneral.get("precioUnitario"))||null==k.errors?null:k.errors.pattern),e.xp6(6),e.Tol(t.esCampoValido("totalCompra")),e.xp6(2),e.Q6J("ngIf",null==(O=t.formularioGeneral.get("totalCompra"))||null==O.errors?null:O.errors.required),e.xp6(1),e.Q6J("ngIf",null==(Q=t.formularioGeneral.get("totalCompra"))||null==Q.errors?null:Q.errors.min),e.xp6(1),e.Q6J("ngIf",null==(w=t.formularioGeneral.get("totalCompra"))||null==w.errors?null:w.errors.pattern),e.xp6(6),e.Tol(t.esCampoValido("descripcion")),e.xp6(2),e.Q6J("ngIf",null==(Y=t.formularioGeneral.get("descripcion"))||null==Y.errors?null:Y.errors.required),e.xp6(1),e.Q6J("ngIf",t.formularioGeneral.get("descripcion").hasError("minlength")),e.xp6(3),e.hij(" ","Editar"!==t.leyenda?"Guardar":"Modificar"," "),e.xp6(2),e.hij(" ","Editar"!==t.leyenda?"Cerrar":"Cancelar"," ")}}let j=(()=>{class o{constructor(t,n,i,c,d){this.modalService=t,this.fb=n,this.compraService=i,this.mensajesService=c,this.usuarioService=d,this.isNumber=G.F,this.isInteger=G.MC,this.isDate="",this.cantidad=0,this.totalCompra=0,this.aplicarReadOnly=!1,this.alerts=[{id:1,type:"info",message:" Complete los campos obligatorios (*).",show:!1},{id:2,type:"warning",message:" Tenga en cuenta que una vez almacenada la informaci\xf3n algunas opciones no las podr\xe1 modificar y ser\xe1n datos permanentes.",show:!1}],this.formularioGeneral=this.iniciarFormulario()}ngOnInit(){"Editar"==this.leyenda&&(this.codInicio=this.compra.codInicio,this.codFin=this.compra.codFin,this.precioUnitario=this.compra.precioUnitario,this.cantidad=this.compra.cantidad,this.totalCompra=this.compra.totalCompra,this.aplicarReadOnly=!0,this.formularioGeneral.patchValue(this.compra),this.formularioGeneral.patchValue({proveedor:this.compra.proveedor.id})),this.compraService.getProveedor(),this.usuarioService.getUsuario()}iniciarFormulario(){return this.fb.group({id:[""],factura:[""],proveedor:["",[r.kI.required]],descripcion:["",[r.kI.required,r.kI.minLength(2)]],cantidad:["",[r.kI.required,r.kI.min(0),r.kI.pattern(this.isInteger)]],codInicio:["",[r.kI.required,r.kI.min(0),r.kI.pattern(this.isInteger)]],codFin:["",[r.kI.required,r.kI.min(0),r.kI.pattern(this.isInteger)]],fechaCompra:["",[r.kI.required,r.kI.pattern(this.isDate)]],fechaVencimiento:["",[r.kI.required,r.kI.pattern(this.isDate)]],precioUnitario:["",[r.kI.required,r.kI.min(0),r.kI.pattern(this.isNumber)]],totalCompra:["",[r.kI.required,r.kI.min(0),r.kI.pattern(this.isNumber)]]})}get listProveedor(){const t=[];return"Editar"==this.leyenda&&t.push(this.compra.proveedor),this.compraService.listProveedor.forEach(n=>{"Editar"==this.leyenda?8==n.estado&&n.id!=this.compra.proveedor.id&&t.push(n):8==n.estado&&t.push(n)}),t}getcantidad(){this.codInicio=this.formularioGeneral.get("codInicio").value,this.codFin=this.formularioGeneral.get("codFin").value,this.cantidad=isNaN(this.codInicio)||isNaN(this.codFin)||null==this.codInicio||null==this.codFin?null:this.codFin+1-this.codInicio,this.formularioGeneral.controls.cantidad.setValue(this.cantidad),this.getTotalCompra()}getTotalCompra(){this.precioUnitario=this.formularioGeneral.get("precioUnitario").value,this.totalCompra=isNaN(this.precioUnitario)||null==this.precioUnitario?null:this.precioUnitario*this.cantidad,this.formularioGeneral.controls.totalCompra.setValue(this.totalCompra)}validarfecha(t){const n=new Date(t);return n.getFullYear()>999&&n.getFullYear()<1e4}validarCodigos(){return!(this.formularioGeneral.get("codInicio").value>this.formularioGeneral.get("codFin").value)}guardar(){var t;return(0,u.mG)(this,void 0,void 0,function*(){if(!this.formularioGeneral.valid)return this.mensajesService.mensajesToast("warning","Complete los que se indican"),Object.values(this.formularioGeneral.controls).forEach(n=>n.markAsTouched());this.validarCodigos()?this.validarfecha(this.formularioGeneral.get("fechaCompra").value)?this.validarfecha(this.formularioGeneral.get("fechaVencimiento").value)?(null===(t=this.compra)||void 0===t?void 0:t.id)?this.editando():1==(yield this.mensajesService.mensajesConfirmar())&&this.registrando():this.mensajesService.mensajesToast("warning","A\xf1o de fecha de vencimiento incorrecto"):this.mensajesService.mensajesToast("warning","A\xf1o de fecha de compra incorrecto"):this.mensajesService.mensajesToast("warning","El c\xf3digo de inicio debe ser inferior al c\xf3digo de fin")})}registrando(){const t=this.formularioGeneral.value,n=this.usuarioService.usuario.codigoUsuario;let i;return i=m().fire({title:"Espere un momento!",html:"Se est\xe1 procesando la informaci\xf3n...",allowOutsideClick:!1,allowEscapeKey:!1,showCancelButton:!1,showConfirmButton:!1,didOpen:()=>{m().showLoading()}}),new Promise((c,d)=>{this.compraService.guardar(t,n).subscribe({next:g=>{i.close(),this.compraService.getCompras(),this.modalService.dismissAll(),this.limpiarCampos(),this.mensajesService.mensajesToast("success","Registro agregado"),c()},error:g=>{i.close(),this.mensajesService.mensajesSweet("error","Ups... Algo sali\xf3 mal",g.error.message),d(g)}})})}editando(){const t=this.formularioGeneral.value;let n;n=m().fire({title:"Espere un momento!",html:"Se est\xe1 procesando la informaci\xf3n...",allowOutsideClick:!1,allowEscapeKey:!1,showCancelButton:!1,showConfirmButton:!1,didOpen:()=>{m().showLoading()}}),this.compraService.modificar(t).subscribe({next:i=>{n.close(),this.compraService.getCompras(),this.modalService.dismissAll(),this.limpiarCampos(),this.mensajesService.mensajesToast("success","Registro modificado")},error:i=>{n.close(),this.mensajesService.mensajesSweet("error","Ups... Algo sali\xf3 mal",i.error.message)}})}esCampoValido(t){const n=this.formularioGeneral.get(t);return!(null==n?void 0:n.valid)&&(null==n?void 0:n.touched)?"is-invalid":(null==n?void 0:n.touched)?"is-valid":""}limpiarCampos(){this.codInicio=null,this.codFin=null,this.cantidad=null,this.precioUnitario=null,this.totalCompra=null,this.formularioGeneral.reset()}getClassOf(){return"Editar"==this.leyenda?"btn btn-info btn-sm btn-rounded boton-cuadrado mx-1":"btn-primary"}getIconsOf(){return"Editar"==this.leyenda?"<i class='mdi mdi-18px mdi-book-edit-outline'></i>":"Agregar"}CambiarAlert(t){t.show=!t.show}restaurarAlerts(){this.alerts.forEach(t=>{t.show=!0})}siMuestraAlertas(){return this.alerts.every(t=>t.show)}openModal(t,n){this.compra=n,"Editar"!=this.leyenda&&this.limpiarCampos(),this.modalService.open(t,{centered:!0,size:"lg",backdrop:"static",keyboard:!1})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(f.FF),e.Y36(r.qu),e.Y36(_.L),e.Y36(L.O),e.Y36(P.i))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-modal"]],inputs:{compra:"compra",leyenda:"leyenda"},decls:4,vars:3,consts:[["type","button",1,"btn","btn-rounded",3,"ngClass","innerHTML","click"],["role","document"],["content",""],[1,"modal-header"],[1,"modal-title","mt-0"],["class","btn-alerta",4,"ngIf"],["type","button","aria-hidden","true",1,"btn-close",3,"click"],[1,"modal-body"],[4,"ngFor","ngForOf"],["id","formCompra","name","formCompra",3,"formGroup","ngSubmit"],[1,"row"],[4,"ngIf"],[1,"mb-4","col-md-6"],["for","proveedor"],[1,"text-danger"],["formControlName","proveedor","placeholder","Escriba o seleccione","labelForId","proveedor",3,"selectOnTab"],[3,"value",4,"ngFor","ngForOf"],[1,"invalid-feedback"],["for","factura"],["id","factura","name","factura","maxlength","100","type","text","placeholder","Factura","formControlName","factura",1,"form-control"],["for","codInicio"],["id","codInicio","name","codInicio","type","number","min","0","formControlName","codInicio","placeholder","C\xf3digo inicio",1,"form-control",3,"readonly","keyup"],["for","codFin"],["id","codFin","name","codInicio","type","number","formControlName","codFin","min","0","placeholder","C\xf3digo de fin",1,"form-control",3,"readonly","keyup"],["for","cantidad"],["id","cantidad","name","cantidad","type","text","readonly","true","formControlName","cantidad","placeholder","Cantidad",1,"form-control"],["for","fechaCompra"],["id","fechaCompra","name","fechaCompra","type","datetime-local","placeholder","dd/MM/yyyy HH:mm","formControlName","fechaCompra",1,"form-control",3,"readonly"],["for","fechaVencimiento"],["id","fechaVencimiento","name","fechaVencimiento","type","date","placeholder","dd/MM/yyyy","formControlName","fechaVencimiento",1,"form-control",3,"readonly"],["for","precioUnitario"],["id","precioUnitario","name","precioUnitario","type","number","min","0","placeholder","Precio unitario","formControlName","precioUnitario",1,"form-control",3,"readonly","keyup"],["for","totalCompra"],["id","totalCompra","name","totalCompra","type","text","readonly","true","formControlName","totalCompra","placeholder","Total compra",1,"form-control"],["for","descripcion"],["row","3","maxlength","750","placeholder","Descripci\xf3n","formControlName","descripcion",1,"form-control"],[1,"modal-footer","custom-modal"],["type","submit","form","formCompra",1,"btn","btn-primary","w-sm","me-2"],[1,"btn","btn-dark","w-sm",3,"click"],[1,"btn-alerta"],["class","mdi mdi-18px mdi-lightbulb-on-outline custom-cursor","ngbTooltip","Mostrar Ayuda",3,"click",4,"ngIf"],["ngbTooltip","Mostrar Ayuda",1,"mdi","mdi-18px","mdi-lightbulb-on-outline","custom-cursor",3,"click"],["role","alert",3,"class",4,"ngIf"],["role","alert"],["type","button","aria-label","Close",1,"btn-close",3,"click"],["id","id","name","id","type","hidden","readonly","true","formControlName","id",1,"form-control"],[3,"value"]],template:function(t,n){if(1&t){const i=e.EpF();e.TgZ(0,"button",0),e.NdJ("click",function(){e.CHM(i);const d=e.MAs(3);return n.openModal(d,n.compra)}),e._uU(1),e.qZA(),e.YNc(2,Te,105,54,"ng-template",1,2,e.W1O)}2&t&&(e.Q6J("ngClass",n.getClassOf())("innerHTML",n.getIconsOf(),e.oJD),e.xp6(1),e.hij(" ",n.leyenda,"\n"))},directives:[l.mk,l.O5,l.sg,r._Y,r.JL,r.sg,Z.w9,r.JJ,r.u,r.Fj,r.nD,r.qQ,r.wV,f._L,Z.jq],styles:["ng-select.is-invalid[_ngcontent-%COMP%]{box-shadow:0 0 0 1px #f46a6a;border-radius:.25rem}ng-select.is-valid[_ngcontent-%COMP%]{box-shadow:0 0 0 1px #34c38f;border-radius:.25rem}button.btn-close[_ngcontent-%COMP%]{margin-left:5px}"]}),o})();var A=s(60841),x=s(98816);function ve(o,a){if(1&o&&(e.TgZ(0,"ng-option",27),e._uU(1),e.qZA()),2&o){const t=a.$implicit,n=e.oxw(2);e.Q6J("value",t),e.xp6(1),e.Oqu(n.estadoNombre(t))}}function Ce(o,a){if(1&o&&(e.TgZ(0,"div",28),e.TgZ(1,"div",29),e.TgZ(2,"div",9),e._uU(3),e.qZA(),e.TgZ(4,"div",10),e.TgZ(5,"h5"),e.TgZ(6,"span",30),e._uU(7),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&o){const t=a.$implicit,n=e.oxw(2);e.xp6(3),e.hij(" ",t.correlativo," "),e.xp6(3),e.Q6J("ngClass",n.getClassOf(t.estado)),e.xp6(1),e.hij(" ",n.estadoNombre(t.estado),"")}}function Ae(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",4),e.TgZ(1,"h5",5),e._uU(2),e.qZA(),e.TgZ(3,"button",6),e.NdJ("click",function(){return e.CHM(t).$implicit.dismiss("Cross click")}),e.qZA(),e.qZA(),e.TgZ(4,"div",7),e.TgZ(5,"div",8),e.TgZ(6,"div",9),e._uU(7),e.qZA(),e.TgZ(8,"div",10),e.TgZ(9,"h5",11),e._uU(10),e.qZA(),e.TgZ(11,"p",12),e._uU(12),e.qZA(),e.TgZ(13,"div",13),e.TgZ(14,"div",14),e.TgZ(15,"ng-select",15),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().valorSeleccionado=i})("ngModelChange",function(){return e.CHM(t),e.oxw().getValesSelect()}),e.YNc(16,ve,2,2,"ng-option",16),e.qZA(),e.qZA(),e.TgZ(17,"div",17),e.TgZ(18,"div",18),e.TgZ(19,"div",19),e.TgZ(20,"div",20),e.TgZ(21,"input",21),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().queryVale=i}),e.qZA(),e._UZ(22,"i",22),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(23,"div",23),e._uU(24),e.ALo(25,"date"),e.qZA(),e.qZA(),e.TgZ(26,"div",13),e.YNc(27,Ce,8,3,"div",24),e.ALo(28,"filter"),e.qZA(),e.qZA(),e.TgZ(29,"div",25),e.TgZ(30,"button",26),e.NdJ("click",function(){return e.CHM(t).$implicit.close("Close click")}),e._uU(31," Cerrar "),e.qZA(),e.qZA()}if(2&o){const t=e.oxw();e.xp6(2),e.hij(" Detalle de Compra de Vales ",""==t.compra.factura||null==t.compra.factura?"Sin Factura":t.compra.factura," "),e.xp6(5),e.AsE(" C\xf3digo inicio ",t.compra.codInicio," | C\xf3digo fin ",t.compra.codFin," "),e.xp6(3),e.Oqu(t.compra.proveedor.nombre),e.xp6(2),e.hij(" ",t.compra.descripcion," "),e.xp6(3),e.Q6J("selectOnTab",!0)("ngModel",t.valorSeleccionado),e.xp6(1),e.Q6J("ngForOf",t.listEstado),e.xp6(5),e.Q6J("ngModel",t.queryVale),e.xp6(3),e.hij(" Fecha de vencimiento ",e.xi3(25,11,t.compra.fechaVencimiento,"dd/MM/yyyy")," "),e.xp6(3),e.Q6J("ngForOf",e.xi3(28,14,t.listValeAux,t.queryVale))}}let xe=(()=>{class o{constructor(t,n){this.modalService=t,this.compraService=n,this.listVale=[],this.listValeAux=[],this.listEstado=[8,5,9,10,11,12]}ngOnInit(){this.getValesPorCompra(this.compra)}getValesPorCompra(t){this.compraService.getValesPorCompra(t.id).subscribe(n=>{this.listVale=n,this.listValeAux=n})}getValesSelect(){console.log(this.valorSeleccionado),this.listValeAux=[],null!=this.valorSeleccionado?this.listVale.forEach(t=>{this.valorSeleccionado==t.estado&&this.listValeAux.push(t)}):this.listValeAux=this.listVale}estadoNombre(t){return 5==t?"Asignado":7==t?"Finalizada":8==t?"Activo":9==t?"Inactivo":10==t?"Caducado":11==t?"Consumido":12==t?"Devuelto":15==t?"Anulada":void 0}getClassOf(t){return 5==t?"badge rounded-pill bg-info":7==t?"badge rounded-pill bg-primary":8==t?"badge rounded-pill bg-success":9==t?"badge rounded-pill bg-danger":10==t?"badge rounded-pill bg-light":11==t?"badge rounded-pill bg-dark":12==t?"badge rounded-pill bg-warning":15==t?"badge rounded-pill bg-secondary":void 0}openModal(t,n){this.compra=n,this.queryVale="",this.valorSeleccionado=null,this.listValeAux=this.listVale,this.modalService.open(t,{centered:!0,size:"lg",backdrop:"static",keyboard:!1,scrollable:!0})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(f.FF),e.Y36(_.L))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-modal-vale"]],inputs:{compra:"compra"},decls:4,vars:0,consts:[["type","button","ngbTooltip","Ver Detalle",1,"btn","btn-primary","btn-sm","btn-rounded","boton-cuadrado","mx-1",3,"click"],[1,"mdi","mdi-18px","mdi-eye-outline"],["role","document"],["content",""],[1,"modal-header"],[1,"modal-title","mt-0"],["type","button","aria-hidden","true",1,"btn-close",3,"click"],[1,"modal-body"],[1,"card","text-center"],[1,"card-header"],[1,"card-body"],[1,"card-title"],[1,"card-text"],[1,"row"],[1,"col-sm-8"],["placeholder","Escriba o seleccione un estado de vale","labelForId","estado",3,"selectOnTab","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"col-sm-4"],[1,"text-sm-end"],[1,"search-box","d-inline-block"],[1,"position-relative"],["type","text","placeholder","Buscar Vale...",1,"form-control",3,"ngModel","ngModelChange"],[1,"bx","bx-search-alt","search-icon"],[1,"card-footer","text-muted"],["class","col-sm-3",4,"ngFor","ngForOf"],[1,"modal-footer","custom-modal"],[1,"btn","btn-dark","w-sm",3,"click"],[3,"value"],[1,"col-sm-3"],[1,"card"],[3,"ngClass"]],template:function(t,n){if(1&t){const i=e.EpF();e.TgZ(0,"button",0),e.NdJ("click",function(){e.CHM(i);const d=e.MAs(3);return n.openModal(d,n.compra)}),e._UZ(1,"i",1),e.qZA(),e.YNc(2,Ae,32,17,"ng-template",2,3,e.W1O)}},directives:[f._L,Z.w9,r.JJ,r.On,l.sg,r.Fj,Z.jq,l.mk],pipes:[l.uU,x.Z],styles:[""]}),o})();function qe(o,a){1&o&&(e.ynx(0),e.TgZ(1,"td"),e.TgZ(2,"a",14),e._uU(3," N/A "),e.qZA(),e.qZA(),e.BQk())}function be(o,a){if(1&o&&(e.TgZ(0,"td"),e.TgZ(1,"a",14),e._uU(2),e.qZA(),e.qZA()),2&o){const t=e.oxw().$implicit;e.xp6(2),e.hij(" ",t.factura," ")}}function ye(o,a){if(1&o&&(e.TgZ(0,"tr"),e.YNc(1,qe,4,0,"ng-container",9),e.YNc(2,be,3,1,"ng-template",null,10,e.W1O),e.TgZ(4,"td"),e._uU(5),e.qZA(),e.TgZ(6,"td"),e._uU(7),e.ALo(8,"date"),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.ALo(13,"currency"),e.qZA(),e.TgZ(14,"td"),e._uU(15),e.ALo(16,"currency"),e.qZA(),e.TgZ(17,"td",11),e._UZ(18,"app-modal-vale",12),e._UZ(19,"app-modal",13),e.qZA(),e.qZA()),2&o){const t=a.$implicit,n=e.MAs(3);e.xp6(1),e.Q6J("ngIf",null==t.factura||""==t.factura)("ngIfElse",n),e.xp6(4),e.Oqu(t.proveedor.nombre),e.xp6(2),e.Oqu(e.xi3(8,10,t.fechaCompra,"dd/MM/yyyy h:mm a")),e.xp6(3),e.Oqu(t.cantidad),e.xp6(2),e.hij(" ",e.gM2(13,13,t.precioUnitario,"USD","symbol","1.2-2")," "),e.xp6(3),e.Oqu(e.gM2(16,18,t.totalCompra,"USD","symbol","1.2-2")),e.xp6(3),e.Q6J("compra",t),e.xp6(1),e.Q6J("compra",t)("leyenda","Editar")}}function Me(o,a){1&o&&(e.TgZ(0,"tr"),e.TgZ(1,"td",15),e._uU(2," No hay datos para mostrar "),e.qZA(),e.qZA())}const Ue=function(o){return{itemsPerPage:10,currentPage:o}};let Ie=(()=>{class o{constructor(){}ngOnInit(){}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-tabla"]],inputs:{compras:"compras",queryString:"queryString"},decls:25,vars:12,consts:[[1,"table-responsive","mb-0"],[1,"table","table-centered","table-nowrap"],[1,"table-light"],[1,"align-middle"],[1,"align-middle","text-center"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"pagination","pagination-rounded","justify-content-end","mb-2"],[3,"nextLabel","previousLabel","pageChange"],[4,"ngIf","ngIfElse"],["factura",""],[1,"align-middle","text-center","text-center"],[3,"compra"],[3,"compra","leyenda"],[1,"text-body","fw-bold"],["colspan","11",2,"text-align","center"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"table",1),e.TgZ(2,"thead",2),e.TgZ(3,"tr"),e.TgZ(4,"th",3),e._uU(5,"Factura"),e.qZA(),e.TgZ(6,"th",3),e._uU(7,"Proveedor"),e.qZA(),e.TgZ(8,"th",3),e._uU(9,"Fecha de compra"),e.qZA(),e.TgZ(10,"th",3),e._uU(11,"Cantidad"),e.qZA(),e.TgZ(12,"th",3),e._uU(13,"Prec. Unit."),e.qZA(),e.TgZ(14,"th",3),e._uU(15,"Total"),e.qZA(),e.TgZ(16,"th",4),e._uU(17,"Acciones"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(18,"tbody"),e.YNc(19,ye,20,23,"tr",5),e.ALo(20,"paginate"),e.ALo(21,"filter"),e.YNc(22,Me,3,0,"tr",6),e.qZA(),e.qZA(),e.TgZ(23,"div",7),e.TgZ(24,"pagination-controls",8),e.NdJ("pageChange",function(c){return n.p=c}),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(19),e.Q6J("ngForOf",e.xi3(20,4,e.xi3(21,7,n.compras,n.queryString),e.VKq(10,Ue,n.p))),e.xp6(3),e.Q6J("ngIf",0==n.compras.length),e.xp6(2),e.Q6J("nextLabel","")("previousLabel",""))},directives:[l.sg,l.O5,A.LS,xe,j],pipes:[A._s,x.Z,l.uU,l.H9],styles:['@charset "UTF-8";td[_ngcontent-%COMP%]{white-space:normal;max-width:300px}']}),o})();const Fe=[{path:"",component:(()=>{class o{constructor(t){this.compraService=t,this.offset=0,this.term=""}ngOnInit(){this.breadCrumbItems=[{label:"Compra"},{label:"Mostrar",active:!0}],this.compraService.getCompras()}get listDatos(){return this.compraService.listCompra}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(_.L))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-mostrar"]],decls:17,vars:5,consts:[[1,"container-fluid"],["title","Compras",3,"breadcrumbItems"],[1,"row"],[1,"col-12"],[1,"card"],[1,"card-body"],[1,"row","mb-2"],[1,"col-sm-4"],[1,"search-box","me-2","mb-2","d-inline-block"],[1,"position-relative"],["type","text","placeholder","Buscar...",1,"form-control",3,"ngModel","ngModelChange"],[1,"bx","bx-search-alt","search-icon"],[1,"col-sm-8"],[1,"text-sm-end"],[3,"leyenda"],[3,"compras","queryString"]],template:function(t,n){1&t&&(e._UZ(0,"app-loader"),e.TgZ(1,"div",0),e._UZ(2,"app-page-title",1),e.TgZ(3,"div",2),e.TgZ(4,"div",3),e.TgZ(5,"div",4),e.TgZ(6,"div",5),e.TgZ(7,"div",6),e.TgZ(8,"div",7),e.TgZ(9,"div",8),e.TgZ(10,"div",9),e.TgZ(11,"input",10),e.NdJ("ngModelChange",function(c){return n.term=c}),e.qZA(),e._UZ(12,"i",11),e.qZA(),e.qZA(),e.qZA(),e.TgZ(13,"div",12),e.TgZ(14,"div",13),e._UZ(15,"app-modal",14),e.qZA(),e.qZA(),e.qZA(),e._UZ(16,"app-tabla",15),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(2),e.Q6J("breadcrumbItems",n.breadCrumbItems),e.xp6(9),e.Q6J("ngModel",n.term),e.xp6(4),e.Q6J("leyenda","Agregar"),e.xp6(1),e.Q6J("compras",n.listDatos)("queryString",n.term))},directives:[v.R,C.V,r.Fj,r.JJ,r.On,j,Ie],styles:[""]}),o})()}];let Je=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[T.Bz.forChild(Fe)],T.Bz]}),o})();var Ne=s(63091);let Se=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[l.ez,Je,r.u5,Ne.v,x.h,r.UX,A.JX,f.IJ,Z.A0]]}),o})()},34576:(E,h,s)=>{s.d(h,{R:()=>C});var l=s(83668),T=s(34099);let e=(()=>{class r{constructor(){this.isLoading=new T.X(!1)}}return r.\u0275fac=function(p){return new(p||r)},r.\u0275prov=l.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();var _=s(86019);function v(r,u){1&r&&(l.TgZ(0,"div",1),l.TgZ(1,"div",2),l.TgZ(2,"div",3),l._UZ(3,"div",4),l._UZ(4,"div",4),l._UZ(5,"div",4),l._UZ(6,"div",4),l._UZ(7,"div",4),l._UZ(8,"div",4),l.qZA(),l.qZA(),l.qZA())}let C=(()=>{class r{constructor(p){this.loaderService=p,this.loading=!0,this.loaderService.isLoading.subscribe(m=>{setTimeout(()=>{this.loading=m},1500)})}ngOnInit(){}}return r.\u0275fac=function(p){return new(p||r)(l.Y36(e))},r.\u0275cmp=l.Xpm({type:r,selectors:[["app-loader"]],decls:1,vars:1,consts:[["id","preloader",4,"ngIf"],["id","preloader"],["id","status"],[1,"spinner-chase"],[1,"chase-dot"]],template:function(p,m){1&p&&l.YNc(0,v,9,0,"div",0),2&p&&l.Q6J("ngIf",m.loading)},directives:[_.O5],styles:[""]}),r})()}}]);