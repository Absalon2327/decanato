"use strict";(self.webpackChunkskote=self.webpackChunkskote||[]).push([[592],{37818:($,O,s)=>{s.d(O,{r:()=>A});var _=s(64762),p=s(44522),f=s(18260),o=s(34099),U=s(23405),g=s(22411),P=s(1659),e=s.n(P),m=s(81366),n=s(65686),c=s(79204),a=s(5250),M=s(38053),C=s(83668);let A=(()=>{class h{constructor(t){this.http=t,this._loading$=new o.X(!0),this._search$=new U.xQ,this._vales$=new o.X([]),this._total$=new o.X(0),this._state={page:1,pageSize:10,searchTerm:"",sortColumn:"",sortDirection:"",startIndex:1,endIndex:10,totalRecords:0},this.listDeMisiones=[],this.valesAsignar=[],this.burl=f.N.baseUrl,this.baseUrl=f.N.baseUrl,this._search$.pipe((0,m.b)(()=>this._loading$.next(!0)),(0,n.b)(200),(0,c.w)(()=>this._search()),(0,a.g)(200),(0,m.b)(()=>this._loading$.next(!1))).subscribe(r=>{this._vales$.next(r.vales),this._total$.next(r.total)}),this._search$.next()}get vales$(){return this._vales$.asObservable()}get total$(){return this._total$.asObservable()}get loading$(){return this._loading$.asObservable()}get page(){return this._state.page}get pageSize(){return this._state.pageSize}get searchTerm(){return this._state.searchTerm}get startIndex(){return this._state.startIndex}get endIndex(){return this._state.endIndex}get totalRecords(){return this._state.totalRecords}set page(t){this._set({page:t})}set pageSize(t){this._set({pageSize:t})}set startIndex(t){this._set({startIndex:t})}set endIndex(t){this._set({endIndex:t})}set totalRecords(t){this._set({totalRecords:t})}set searchTerm(t){this._set({searchTerm:t})}set sortColumn(t){this._set({sortColumn:t})}set sortDirection(t){this._set({sortDirection:t})}_set(t){Object.assign(this._state,t),this._search$.next()}_search(){const{sortColumn:t,sortDirection:r,page:i}=this._state;let u=function(h,E,t){return""===t?h:[...h].sort((r,l)=>{const i=function(h,E){return h<E?-1:h>E?1:0}(r[E],l[E]);return"asc"===t?i:-i})}(this.valesAsignar,t,r);u=u.filter(v=>function(h,E){return h.correlativoVale||h.fechaVencimiento||h.idVale||h.valorVale}(v));const D=u.length;return this.totalRecords=u.length,this._state.startIndex=(i-1)*this.pageSize,this._state.endIndex=(i-1)*this.pageSize+this.pageSize,this.endIndex>this.totalRecords&&(this.endIndex=this.totalRecords),u=u.slice(this._state.startIndex,this._state.endIndex),(0,g.of)({vales:u,total:D})}getValesAsignar(t){return this.http.get(`${this.baseUrl}/asignacionvale/listarvalesasignar/${t}`).pipe((0,M.U)(r=>r)).subscribe(r=>{this.valesAsignar=r})}getVales(t){return this.http.get(`${this.baseUrl}/asignacionvale/listarvalesasignar/${t}`)}getMisiones(){const t=localStorage.getItem("token"),l={headers:new p.WM({Authorization:`Bearer ${t}`})};this.http.get(`${this.baseUrl}/solicitudvale/listasinpagina`,l).pipe((0,M.U)(i=>i)).subscribe(i=>{console.log(i),this.listDeMisiones=i,console.log(i)},i=>{console.error("Error al obtener las misiones:",i)})}ObtenerLista(t){return this.http.get(`${this.baseUrl}/document/${t}`)}NuevosDatos(t,r){const l=localStorage.getItem("token"),d={headers:new p.WM({Authorization:`Bearer ${l}`})},u=new FormData;return u.append("imagen",r),u.append("document",JSON.stringify(t)),this.http.post(`${this.burl}/document/insertar`,u,d)}getDetalleAsignacionVale(t){return this.http.get(`${this.baseUrl}/asignacionvale/listar/${t}`)}getAsignacionValeSolicitudVale(t){return this.http.get(`${this.baseUrl}/asignacionvale/ver/${t}`)}devolverVales(t,r){return console.log("interfaz: ",t),this.http.post(`${this.baseUrl}/asignacionvale/devolver`,{valeDevuelto:t,usuario:r})}liquidarVales(t,r,l,i){return this.http.post(`${this.baseUrl}/asignacionvale/liquidar`,{valesLiquidados:t,usuario:r,empleado:l,cargo:i})}anularMision(t,r,l,i){return this.http.post(`${this.baseUrl}/asignacionvale/anular`,{misionAnulada:t,usuario:r,empleado:l,cargo:i})}getSolicitudVale(t){return this.http.get(`${this.baseUrl}/asignacionvale/listarsolicitudvalecodigo/${t}`)}mensajesConfirmarDevolucion(t="warning",r="\xbfEst\xe1 seguro de devolver?",l="Algunos datos no se podr\xe1n revertir, digite: ",i="devolver"){return(0,_.mG)(this,void 0,void 0,function*(){let d=!1;const u=i,{value:D}=yield e().fire({icon:t,title:r,input:"text",inputLabel:l+i,inputValue:"",showCancelButton:!0,confirmButtonColor:"#972727",confirmButtonText:"Aceptar",cancelButtonColor:"#2c3136",cancelButtonText:"Cancelar",inputValidator:v=>v?v!=u?"\xa1No coincide!":void 0:"\xa1Tiene que escribir algo!"});return D&&(d=!0),d})}mensajesConfirmarLiquidacion(t="warning",r="\xbfEst\xe1 seguro de liquidar?",l="Algunos datos no se podr\xe1n revertir, digite: ",i="liquidar"){return(0,_.mG)(this,void 0,void 0,function*(){let d=!1;const u=i,{value:D}=yield e().fire({icon:t,title:r,input:"text",inputLabel:l+i,inputValue:"",showCancelButton:!0,confirmButtonColor:"#972727",confirmButtonText:"Aceptar",cancelButtonColor:"#2c3136",cancelButtonText:"Cancelar",inputValidator:v=>v?v!=u?"\xa1No coincide!":void 0:"\xa1Tiene que escribir algo!"});return D&&(d=!0),d})}mensajesConfirmarAnular(t="warning",r="\xbfEst\xe1 seguro de Anular?",l="Algunos datos no se podr\xe1n revertir, digite: ",i="anular"){return(0,_.mG)(this,void 0,void 0,function*(){let d=!1;const u=i,{value:D}=yield e().fire({icon:t,title:r,input:"text",inputLabel:l+i,inputValue:"",showCancelButton:!0,confirmButtonColor:"#972727",confirmButtonText:"Aceptar",cancelButtonColor:"#2c3136",cancelButtonText:"Cancelar",inputValidator:v=>v?v!=u?"\xa1No coincide!":void 0:"\xa1Tiene que escribir algo!"});return D&&(d=!0),d})}}return h.\u0275fac=function(t){return new(t||h)(C.LFG(p.eN))},h.\u0275prov=C.Yz7({token:h,factory:h.\u0275fac,providedIn:"root"}),h})()},51657:($,O,s)=>{s.d(O,{H:()=>P});var _=s(18260),p=s(38053),f=s(1659),o=s.n(f),U=s(83668),g=s(44522);let P=(()=>{class e{constructor(n){this.http=n,this.urlbase=_.N.baseUrl,this.url=_.N.baseUrl,this.listSoliVehiculo=[],this.listSoliVehiculo2=[],this.listSoliVehiculo3=[],this.listSoliVehiculoRol=[]}getSolicitudV(){return this.http.get(this.urlbase+"/solicitudvehiculo/todas")}getSolicitudesVehiculo1(n){o().fire({title:"Espere un momento!",html:"Se est\xe1 procesando la informaci\xf3n...",didOpen:()=>{o().showLoading()}});let c=`${this.url}/solicitudvehiculo/lista`;return null!=n&&(c=`${this.url}/solicitudvehiculo/lista/${n}`),this.http.get(c).pipe((0,p.U)(a=>a)).toPromise().then(a=>(o().close(),this.listSoliVehiculo=a,this.listSoliVehiculo)).catch(a=>{throw o().close(),console.error("Error al obtener las solicitudes de veh\xedculo",a),a})}getSolicitudesVehiculo2(n){o().fire({title:"Espere un momento!",html:"Se est\xe1 procesando la informaci\xf3n...",didOpen:()=>{o().showLoading()}});let c=`${this.url}/solicitudvehiculo/lista`;return null!=n&&(c=`${this.url}/solicitudvehiculo/lista/${n}`),this.http.get(c).pipe((0,p.U)(a=>a)).toPromise().then(a=>(o().close(),this.listSoliVehiculo2=a,this.listSoliVehiculo2)).catch(a=>{throw o().close(),console.error("Error al obtener las solicitudes de veh\xedculo",a),a})}getSolicitudesVehiculo3(n){o().fire({title:"Espere un momento!",html:"Se est\xe1 procesando la informaci\xf3n...",didOpen:()=>{o().showLoading()}});let c=`${this.url}/solicitudvehiculo/lista`;return null!=n&&(c=`${this.url}/solicitudvehiculo/lista/${n}`),this.http.get(c).pipe((0,p.U)(a=>a)).toPromise().then(a=>(o().close(),this.listSoliVehiculo3=a,this.listSoliVehiculo3)).catch(a=>{throw o().close(),console.error("Error al obtener las solicitudes de veh\xedculo",a),a})}getSolicitudesRol(n){return o().fire({title:"Espere un momento!",html:"Se est\xe1 procesando la informaci\xf3n...",didOpen:()=>{o().showLoading()}}),this.http.get(`${this.url}/solicitudvehiculo/listado/${n}`).pipe((0,p.U)(c=>c)).toPromise().then(c=>(o().close(),this.listSoliVehiculoRol=c,this.listSoliVehiculoRol)).catch(c=>{throw o().close(),console.error("Error al obtener las solicitudes de veh\xedculo",c),c})}}return e.\u0275fac=function(n){return new(n||e)(U.LFG(g.eN))},e.\u0275prov=U.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},18798:($,O,s)=>{s.d(O,{L:()=>U});var _=s(38053),p=s(18260),f=s(83668),o=s(44522);let U=(()=>{class g{constructor(e){this.http=e,this.baseUrl=p.N.baseUrl,this.listCompra=[],this.listProveedor=[]}getComprasConPaginacion(){this.http.get(`${this.baseUrl}/compra/lista`).pipe((0,_.U)(e=>e.content)).subscribe(e=>{this.listCompra=e})}getValesPorCompra(e){return this.http.get(`${this.baseUrl}/vale/valesporcompra/${e}`).pipe((0,_.U)(m=>m))}getCompras(){this.http.get(`${this.baseUrl}/compra/listasinpagina`).pipe((0,_.U)(e=>e)).subscribe(e=>{this.listCompra=e})}getProveedor(){this.http.get(`${this.baseUrl}/proveedor/listasinpagina`).pipe((0,_.U)(e=>e)).subscribe(e=>{this.listProveedor=e})}guardar(e,m){return this.http.post(`${this.baseUrl}/compra/insertar`,{compra:e,idusuariologueado:m})}modificar(e){return this.http.put(`${this.baseUrl}/compra/editar/${e.id}`,e)}borrar(e){return this.http.delete(`${this.baseUrl}/compra/eliminar/${e.id}`)}}return g.\u0275fac=function(e){return new(e||g)(f.LFG(o.eN))},g.\u0275prov=f.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),g})()}}]);