"use strict";(self.webpackChunkskote=self.webpackChunkskote||[]).push([[439],{439:(C,g,l)=>{l.r(g),l.d(g,{DevolucionValeModule:()=>pe});var c=l(86019),_=l(56225),f=l(64762),s=l(49133),v=l(24017),h=l(1659),d=l.n(h),e=l(83668),p=l(38053),m=l(44522),q=l(18260),A=l(66548);let U=(()=>{class o{constructor(t,a){this.http=t,this.mensajesService=a,this.baseUrl=q.N.baseUrl,this.listProveedor=[],this.listVale=[]}getProveedor(){this.http.get(`${this.baseUrl}/proveedor/listasinpagina`).pipe((0,p.U)(t=>t)).subscribe(t=>{this.listProveedor=t})}getValesPorCantidad(t=0){let a;return a=d().fire({title:"Espere un momento!",html:"Se est\xe1 procesando la informaci\xf3n...",allowOutsideClick:!1,allowEscapeKey:!1,showCancelButton:!1,showConfirmButton:!1,didOpen:()=>{d().showLoading()}}),new Promise((n,i)=>{0!=t?this.http.get(`${this.baseUrl}/vale/devolucioncantidad/${t}`).pipe((0,p.U)(u=>u)).subscribe({next:u=>{a.close(),this.listVale=u,n(u)},error:u=>{a.close(),this.mensajesService.mensajesSweet("error","Ups... Algo sali\xf3 mal",u.error.message),i(u)}}):(a.close(),this.listVale=[],n([]))})}getValesPorMonto(t=0){let a;return a=d().fire({title:"Espere un momento!",html:"Se est\xe1 procesando la informaci\xf3n...",allowOutsideClick:!1,allowEscapeKey:!1,showCancelButton:!1,showConfirmButton:!1,didOpen:()=>{d().showLoading()}}),new Promise((n,i)=>{0!=t?this.http.get(`${this.baseUrl}/vale/devolucionmonto/${t}`).pipe((0,p.U)(u=>u)).subscribe({next:u=>{a.close(),0===u.length?(this.listVale=[],this.mensajesService.mensajesSweet("info","Posibles razones...","Es posible que no se tengan existencias de vales, que con el monto ingresado no se puedan obtener vales o que no haya vales disponibles (Activos)","Entiendo")):this.listVale=u,n(u)},error:u=>{a.close(),this.mensajesService.mensajesSweet("error","Ups... Algo sali\xf3 mal",u.error.message),i(u)}}):(a.close(),this.listVale=[],n([]))})}modificar(t){return this.http.put(`${this.baseUrl}/vale/actualizarValesCantidad`,t)}modificarPorCantidad(t,a,n){const i=`${this.baseUrl}/vale/actualizarValesCantidad`,u={vales:t,concepto:a,idusuariologueado:n},me={headers:new m.WM({"Content-Type":"application/json"})};return this.http.put(i,u,me)}validarUsuario(t){return this.http.post(`${this.baseUrl}/vale/validarusuario`,t)}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(m.eN),e.LFG(A.O))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var Z=l(20154),M=l(15501),y=l(34576),w=l(11950),T=l(868),b=l(60841),x=l(98816);function V(o,r){1&o&&(e.ynx(0),e.TgZ(1,"td"),e._uU(2,"N/A"),e.qZA(),e.BQk())}function S(o,r){if(1&o&&(e.TgZ(0,"td"),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.compra.factura," ")}}function I(o,r){if(1&o&&(e.TgZ(0,"tr"),e.TgZ(1,"td"),e.TgZ(2,"a",7),e._uU(3),e.qZA(),e.qZA(),e.TgZ(4,"td"),e._uU(5),e.ALo(6,"date"),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.ALo(9,"currency"),e.qZA(),e.YNc(10,V,3,0,"ng-container",8),e.YNc(11,S,2,1,"ng-template",null,9,e.W1O),e.TgZ(13,"td"),e._uU(14),e.ALo(15,"date"),e.qZA(),e.qZA()),2&o){const t=r.$implicit,a=e.MAs(12);e.xp6(3),e.hij(" ",t.correlativo," "),e.xp6(2),e.Oqu(e.xi3(6,6,t.compra.fechaCompra,"dd/MM/yyyy h:mm a")),e.xp6(3),e.Oqu(e.gM2(9,9,t.valor,"USD","symbol","1.2-2")),e.xp6(2),e.Q6J("ngIf",null==t.compra.factura||""==t.compra.factura)("ngIfElse",a),e.xp6(4),e.Oqu(e.xi3(15,14,t.fechaVencimiento,"dd/MM/yyyy"))}}const J=function(o){return{itemsPerPage:10,currentPage:o}};let N=(()=>{class o{constructor(){}ngOnInit(){}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-tabla"]],inputs:{vales:"vales",queryString:"queryString"},decls:20,vars:11,consts:[[1,"table-responsive","mb-0"],[1,"table","table-centered","table-nowrap"],[1,"table-light"],[1,"align-middle"],[4,"ngFor","ngForOf"],[1,"pagination","pagination-rounded","justify-content-end","mb-2"],[3,"nextLabel","previousLabel","pageChange"],[1,"text-body","fw-bold"],[4,"ngIf","ngIfElse"],["factura",""]],template:function(t,a){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"table",1),e.TgZ(2,"thead",2),e.TgZ(3,"tr"),e.TgZ(4,"th",3),e._uU(5,"C\xf3digo de Vale"),e.qZA(),e.TgZ(6,"th",3),e._uU(7,"Fecha de Compra"),e.qZA(),e.TgZ(8,"th",3),e._uU(9,"Valor"),e.qZA(),e.TgZ(10,"th",3),e._uU(11,"Factura"),e.qZA(),e.TgZ(12,"th",3),e._uU(13,"Fecha ven. vale"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(14,"tbody"),e.YNc(15,I,16,17,"tr",4),e.ALo(16,"paginate"),e.ALo(17,"filter"),e.qZA(),e.qZA(),e.TgZ(18,"div",5),e.TgZ(19,"pagination-controls",6),e.NdJ("pageChange",function(i){return a.p=i}),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(15),e.Q6J("ngForOf",e.xi3(16,3,e.xi3(17,6,a.vales,a.queryString),e.VKq(9,J,a.p))),e.xp6(4),e.Q6J("nextLabel","")("previousLabel",""))},directives:[c.sg,b.LS,c.O5],pipes:[b._s,x.Z,c.uU,c.H9],styles:['@charset "UTF-8";td[_ngcontent-%COMP%]{white-space:normal;max-width:300px}']}),o})();const G=["content"];function k(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div",34),e.TgZ(1,"strong"),e._uU(2),e.qZA(),e._uU(3),e.TgZ(4,"button",35),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit;return e.oxw().CambiarAlert(n)}),e.qZA(),e.qZA()}if(2&o){const t=e.oxw().$implicit;e.Gre("alert alert-",t.type," alert-dismissible fade show"),e.xp6(2),e.Oqu("info"===t.type?"Importante!":"Precauci\xf3n!"),e.xp6(1),e.hij(" ",t.message," ")}}function O(o,r){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,k,5,5,"div",33),e.qZA()),2&o){const t=r.$implicit;e.xp6(1),e.Q6J("ngIf",t.show)}}function F(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"i",38),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).restaurarAlerts()}),e.qZA()}}function j(o,r){if(1&o&&(e.TgZ(0,"div",36),e.YNc(1,F,1,0,"i",37),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!t.siMuestraAlertas())}}function Q(o,r){if(1&o&&(e.TgZ(0,"ng-option",39),e._uU(1),e.qZA()),2&o){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t.nombre)}}function Y(o,r){1&o&&(e.TgZ(0,"span"),e._uU(1," Requiere un proveedor"),e.qZA())}function P(o,r){1&o&&(e.TgZ(0,"span"),e._uU(1," Requiere una cantidad"),e.qZA())}function D(o,r){1&o&&(e.TgZ(0,"span"),e._uU(1," Cantidad no puede ser negativa o cero"),e.qZA())}function L(o,r){1&o&&(e.TgZ(0,"span"),e._uU(1," Solamente se permiten numeros enteros"),e.qZA())}function E(o,r){if(1&o&&(e.ynx(0),e.TgZ(1,"label",40),e._uU(2,"Cantidad de vales: "),e.TgZ(3,"span",17),e._uU(4,"*"),e.qZA(),e.qZA(),e._UZ(5,"input",41),e.TgZ(6,"div",20),e.YNc(7,P,2,0,"span",21),e.YNc(8,D,2,0,"span",21),e.YNc(9,L,2,0,"span",21),e.qZA(),e.BQk()),2&o){const t=e.oxw();let a,n,i;e.xp6(5),e.Tol(t.esCampoValido("cantidad")),e.xp6(2),e.Q6J("ngIf",null==(a=t.formularioGeneral.get("cantidad"))||null==a.errors?null:a.errors.required),e.xp6(1),e.Q6J("ngIf",null==(n=t.formularioGeneral.get("cantidad"))||null==n.errors?null:n.errors.min),e.xp6(1),e.Q6J("ngIf",null==(i=t.formularioGeneral.get("cantidad"))||null==i.errors?null:i.errors.pattern)}}function R(o,r){1&o&&(e.TgZ(0,"span"),e._uU(1," Requiere un total monetario"),e.qZA())}function $(o,r){1&o&&(e.TgZ(0,"span"),e._uU(1," Total monetario no puede ser negativo o cero"),e.qZA())}function B(o,r){1&o&&(e.TgZ(0,"span"),e._uU(1," Solamente se permiten numeros con dos decimales"),e.qZA())}function H(o,r){if(1&o&&(e.TgZ(0,"label",42),e._uU(1,"Total monetario ($): "),e.TgZ(2,"span",17),e._uU(3,"*"),e.qZA(),e.qZA(),e._UZ(4,"input",43),e.TgZ(5,"div",20),e.YNc(6,R,2,0,"span",21),e.YNc(7,$,2,0,"span",21),e.YNc(8,B,2,0,"span",21),e.qZA()),2&o){const t=e.oxw();let a,n,i;e.xp6(4),e.Tol(t.esCampoValido("total_monetario")),e.xp6(2),e.Q6J("ngIf",null==(a=t.formularioGeneral.get("total_monetario"))||null==a.errors?null:a.errors.required),e.xp6(1),e.Q6J("ngIf",null==(n=t.formularioGeneral.get("total_monetario"))||null==n.errors?null:n.errors.min),e.xp6(1),e.Q6J("ngIf",null==(i=t.formularioGeneral.get("total_monetario"))||null==i.errors?null:i.errors.pattern)}}function z(o,r){1&o&&(e.TgZ(0,"span"),e._uU(1," Requiere un concepto "),e.qZA())}function X(o,r){1&o&&(e.TgZ(0,"span"),e._uU(1," Digite m\xe1s de 2 caracteres "),e.qZA())}function K(o,r){1&o&&(e.TgZ(0,"span"),e._uU(1," Limite 750 caracteres "),e.qZA())}function W(o,r){if(1&o&&(e.ynx(0),e.TgZ(1,"div",56),e.TgZ(2,"strong"),e._uU(3,"Importante!"),e.qZA(),e._uU(4),e.ALo(5,"currency"),e.qZA(),e.BQk()),2&o){const t=e.oxw(2);e.xp6(4),e.hij(" No se pudo encontrar N cantidad de vales que su suma total del valor (precio) sea igual a ",e.gM2(5,1,t.total_monetario,"USD","symbol","1.2-2"),", solo se obtuvieron los siguientes vales que su suma del valor se acerca a dicho monto. ")}}function ee(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div",2),e.TgZ(1,"div",3),e.TgZ(2,"div",4),e.TgZ(3,"div",5),e.YNc(4,W,6,6,"ng-container",21),e.TgZ(5,"div",44),e.TgZ(6,"div",45),e.TgZ(7,"div",46),e.TgZ(8,"div",47),e.TgZ(9,"input",48),e.NdJ("ngModelChange",function(n){return e.CHM(t),e.oxw().term=n}),e.qZA(),e._UZ(10,"i",49),e.qZA(),e.qZA(),e.qZA(),e.TgZ(11,"div",50),e.TgZ(12,"h5"),e._uU(13," Vales Encontrados "),e.TgZ(14,"span",51),e._uU(15),e.qZA(),e.qZA(),e.qZA(),e.TgZ(16,"div",50),e.TgZ(17,"h5"),e._uU(18," Monto Generado "),e.TgZ(19,"span",52),e._uU(20),e.ALo(21,"currency"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(22,"div",45),e.TgZ(23,"div",53),e.TgZ(24,"button",54),e.NdJ("click",function(){return e.CHM(t),e.oxw().registrarDevolucion()}),e._uU(25," Registrar Transacci\xf3n "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e._UZ(26,"app-tabla",55),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=e.oxw();e.xp6(4),e.Q6J("ngIf",0==t.tipoOpcion&&t.montoGenerado!=t.total_monetario),e.xp6(5),e.Q6J("ngModel",t.term),e.xp6(6),e.Oqu(t.cantidaGenerada),e.xp6(5),e.Oqu(e.gM2(21,6,t.montoGenerado,"USD","symbol","1.2-2")),e.xp6(6),e.Q6J("vales",t.listDatos)("queryString",t.term)}}function te(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"i",79),e.NdJ("click",function(){return e.CHM(t),e.oxw(3).restaurarAlertsUsuario()}),e.qZA()}}function oe(o,r){if(1&o&&(e.TgZ(0,"div",77),e.YNc(1,te,1,0,"i",78),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",!t.siMuestraAlertasUsuario())}}function ae(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div",34),e.TgZ(1,"strong"),e._uU(2),e.qZA(),e._uU(3),e.TgZ(4,"button",35),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit;return e.oxw(2).CambiarAlertUsuario(n)}),e.qZA(),e.qZA()}if(2&o){const t=e.oxw().$implicit;e.Gre("alert alert-",t.type," alert-dismissible fade show"),e.xp6(2),e.Oqu("warning"===t.type?"Precauci\xf3n!":"Importante!"),e.xp6(1),e.hij(" ",t.message," ")}}function re(o,r){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,ae,5,5,"div",33),e.qZA()),2&o){const t=r.$implicit;e.xp6(1),e.Q6J("ngIf",t.show)}}function ne(o,r){1&o&&(e.TgZ(0,"span"),e._uU(1," Requiere un correo "),e.qZA())}function ie(o,r){1&o&&(e.TgZ(0,"span"),e._uU(1," Requiere una contrase\xf1a "),e.qZA())}function se(o,r){1&o&&(e.TgZ(0,"span"),e._uU(1," Limite 50 caracteres "),e.qZA())}function le(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div",57),e.TgZ(1,"h5",58),e._uU(2,"Ingresar Credenciales"),e.qZA(),e.YNc(3,oe,2,1,"div",59),e.TgZ(4,"button",60),e.NdJ("click",function(){return e.CHM(t).$implicit.dismiss("Cross click")}),e.qZA(),e.qZA(),e.TgZ(5,"div",61),e.YNc(6,re,2,1,"div",6),e.TgZ(7,"form",62),e.NdJ("ngSubmit",function(){return e.CHM(t),e.oxw().validarUsuario()}),e.TgZ(8,"div",2),e.TgZ(9,"div",63),e.TgZ(10,"label",64),e._uU(11,"Correo Institucional: "),e.TgZ(12,"span",17),e._uU(13,"*"),e.qZA(),e.TgZ(14,"span",65),e._uU(15),e.qZA(),e.qZA(),e.TgZ(16,"input",66),e.NdJ("keyup",function(){return e.CHM(t),e.oxw().getCorreo()}),e.qZA(),e.TgZ(17,"div",20),e.YNc(18,ne,2,0,"span",21),e.qZA(),e.qZA(),e.TgZ(19,"div",63),e.TgZ(20,"label",67),e._uU(21,"Contrase\xf1a:"),e.qZA(),e.TgZ(22,"div",68),e._UZ(23,"input",69),e.TgZ(24,"button",70),e.NdJ("click",function(){return e.CHM(t),e.oxw().togglePasswordVisibility()}),e._UZ(25,"i"),e.qZA(),e.TgZ(26,"div",20),e.YNc(27,ie,2,0,"span",21),e.YNc(28,se,2,0,"span",21),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(29,"div",71),e.TgZ(30,"button",72),e._uU(31," Registrar "),e.TgZ(32,"span",73),e._uU(33),e.TgZ(34,"span",74),e._uU(35,"unread messages"),e.qZA(),e.qZA(),e.TgZ(36,"span",75),e._uU(37),e.ALo(38,"currency"),e.TgZ(39,"span",74),e._uU(40,"unread messages"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(41,"button",76),e.NdJ("click",function(){return e.CHM(t).$implicit.close("Close click")}),e._uU(42," Cancelar "),e.qZA(),e.qZA()}if(2&o){const t=e.oxw();e.xp6(3),e.Q6J("ngIf",t.alertsUsuario),e.xp6(3),e.Q6J("ngForOf",t.alertsUsuario),e.xp6(1),e.Q6J("formGroup",t.formularioUsuario),e.xp6(8),e.hij(" ",t.correoCompleto,""),e.xp6(1),e.Tol(t.esCampoValidoUsuario("nombre")),e.xp6(2),e.Q6J("ngIf",t.formularioUsuario.get("nombre").hasError("required")),e.xp6(5),e.Tol(t.esCampoValidoUsuario("clave")),e.Q6J("type",t.showPassword?"text":"password"),e.xp6(2),e.Tol(t.showPassword?"mdi mdi-eye-off-outline":"mdi mdi-eye-outline"),e.xp6(2),e.Q6J("ngIf",t.formularioUsuario.get("clave").hasError("required")),e.xp6(1),e.Q6J("ngIf",t.formularioUsuario.get("clave").hasError("maxlength")),e.xp6(5),e.hij(" ",t.cantidaGenerada," "),e.xp6(4),e.hij(" ",e.gM2(38,16,t.montoGenerado,"USD","symbol","1.2-2")," ")}}const ce=[{path:"",component:(()=>{class o{constructor(t,a,n,i,u){this.fb=t,this.devolucionValeService=a,this.mensajesService=n,this.modalService=i,this.usuarioService=u,this.showPassword=!1,this.term="",this.isNumber=v.F,this.isInteger=v.MC,this.alerts=[{id:1,type:"info",message:" Seleccione un tipo de movimiento y complete los campos obligatorios (*).",show:!1},{id:2,type:"warning",message:" Tenga en cuenta que una vez registrada la devoluci\xf3n de los vales no podr\xe1 revertir la operaci\xf3n.",show:!1}],this.alertsUsuario=[{id:1,type:"info",message:" Al ingresar las credenciales pertenecientes a Jefe Financiera, clic en bot\xf3n 'Registrar', se realizar\xe1 el ajuste y los datos no se podr\xe1n revertir.",show:!0}],this.formularioGeneral=this.iniciarFormulario(),this.formularioGeneral.get("total_monetario").disable(),this.formularioUsuario=this.iniciarFormularioUsuario()}ngOnInit(){this.breadCrumbItems=[{label:"Ajuste de Vale"},{label:"Mostrar",active:!0}],this.devolucionValeService.getProveedor(),this.devolucionValeService.getValesPorCantidad(),this.devolucionValeService.getValesPorMonto(),this.usuarioService.getUsuario()}iniciarFormularioUsuario(){return this.fb.group({nombre:["",[s.kI.required]],clave:["",[s.kI.required,s.kI.maxLength(50)]]})}iniciarFormulario(){return this.fb.group({tipo:[1],proveedor:[null,[s.kI.required]],cantidad:["",[s.kI.required,s.kI.min(1),s.kI.pattern(this.isInteger)]],total_monetario:["",[s.kI.required,s.kI.min(1),s.kI.pattern(this.isNumber)]],concepto:["",[s.kI.required,s.kI.minLength(2),s.kI.maxLength(750)]]})}getCorreo(){const t=this.formularioUsuario.get("nombre").value;this.correoCompleto=null==t||""==t?null:t+"@ues.edu.sv"}cambiartipo1(){this.formularioGeneral.get("total_monetario").disable(),this.formularioGeneral.get("cantidad").enable(),this.devolucionValeService.listVale=[]}cambiartipo0(){this.formularioGeneral.get("total_monetario").enable(),this.formularioGeneral.get("cantidad").disable(),this.devolucionValeService.listVale=[]}get listProveedor(){const t=[];return this.devolucionValeService.listProveedor.forEach(a=>{8==a.estado&&14==a.tipo&&t.push(a)}),t}get listDatos(){return this.montoGenerado=this.cantidaGenerada=0,this.devolucionValeService.listVale.forEach(t=>{this.montoGenerado+=t.valor}),this.cantidaGenerada=this.devolucionValeService.listVale.length,this.devolucionValeService.listVale}generarVales(){return(0,f.mG)(this,void 0,void 0,function*(){if(this.cantidad=this.formularioGeneral.get("cantidad").value,this.total_monetario=this.formularioGeneral.get("total_monetario").value,this.tipoOpcion=this.formularioGeneral.get("tipo").value,this.devolucionValeService.listVale=[],!this.formularioGeneral.valid)return this.mensajesService.mensajesToast("warning","Complete los que se indican"),Object.values(this.formularioGeneral.controls).forEach(t=>t.markAsTouched());1==this.tipoOpcion?this.devolucionValeService.getValesPorCantidad(this.cantidad):this.devolucionValeService.getValesPorMonto(this.total_monetario)})}registrarDevolucion(){if(!this.formularioGeneral.valid)return this.mensajesService.mensajesToast("warning","Complete los que se indican"),Object.values(this.formularioGeneral.controls).forEach(t=>t.markAsTouched());this.openModal(this.contentTemplate)}validarUsuario(){const t={nombre:this.correoCompleto,clave:this.formularioUsuario.get("clave").value};if(!this.formularioUsuario.valid)return this.mensajesService.mensajesToast("warning","Complete los que se indican"),Object.values(this.formularioUsuario.controls).forEach(a=>a.markAsTouched());this.devolucionValeService.validarUsuario(t).subscribe({next:a=>{this.usuarioRespuestaDto=a,this.editando()},error:a=>{this.mensajesService.mensajesSweet("error","Ups... Algo sali\xf3 mal",a.error.message)}})}editando(){this.proveedor=this.formularioGeneral.get("proveedor").value;const t=this.formularioGeneral.get("concepto").value,a=this.usuarioService.usuario.codigoUsuario,n="Ajuste a "+this.proveedor.nombre+", autorizado por "+this.usuarioRespuestaDto.empleado.nombre+" "+this.usuarioRespuestaDto.empleado.apellido+" con cargo de "+this.usuarioRespuestaDto.empleado.cargo.nombreCargo+" en concepto de: "+t;let i;i=d().fire({title:"Espere un momento!",html:"Se est\xe1 procesando la informaci\xf3n...",allowOutsideClick:!1,allowEscapeKey:!1,showCancelButton:!1,showConfirmButton:!1,didOpen:()=>{d().showLoading()}}),this.devolucionValeService.modificarPorCantidad(this.listDatos,n,a).subscribe({next:u=>{i.close(),this.mensajesService.mensajesSweet("success","Ajuste de vales completado","Acci\xf3n realizada por "+this.usuarioRespuestaDto.empleado.nombre+" "+this.usuarioRespuestaDto.empleado.apellido),this.limpiarCampos(),this.modalService.dismissAll()},error:u=>{i.close(),this.mensajesService.mensajesSweet("error","Ups... Algo sali\xf3 mal",u.error.message)}})}limpiarCampos(){this.cantidad=null,this.total_monetario=null,this.cantidad=null,this.cantidaGenerada=null,this.montoGenerado=null,this.formularioGeneral.reset(),this.formularioGeneral.get("tipo").patchValue(this.tipoOpcion),this.devolucionValeService.listVale=[]}esCampoValido(t){const a=this.formularioGeneral.get(t);return!(null==a?void 0:a.valid)&&(null==a?void 0:a.touched)?"is-invalid":(null==a?void 0:a.touched)?"is-valid":""}esCampoValidoUsuario(t){const a=this.formularioUsuario.get(t);return!(null==a?void 0:a.valid)&&(null==a?void 0:a.touched)?"is-invalid":(null==a?void 0:a.touched)?"is-valid":""}CambiarAlert(t){t.show=!t.show}CambiarAlertUsuario(t){t.show=!t.show}restaurarAlerts(){this.alerts.forEach(t=>{t.show=!0})}restaurarAlertsUsuario(){this.alertsUsuario.forEach(t=>{t.show=!0})}siMuestraAlertas(){return this.alerts.every(t=>t.show)}siMuestraAlertasUsuario(){return this.alertsUsuario.every(t=>t.show)}togglePasswordVisibility(){this.showPassword=!this.showPassword}openModal(t){this.correoCompleto=null,this.formularioUsuario.reset(),this.modalService.open(t,{centered:!1,backdrop:"static",keyboard:!1,windowClass:"modal-holder"})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(s.qu),e.Y36(U),e.Y36(A.O),e.Y36(Z.FF),e.Y36(M.i))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-mostrar"]],viewQuery:function(t,a){if(1&t&&e.Gf(G,5),2&t){let n;e.iGM(n=e.CRH())&&(a.contentTemplate=n.first)}},decls:54,vars:19,consts:[[1,"container-fluid"],["title","Ajuste de Vales",3,"breadcrumbItems"],[1,"row"],[1,"col-12"],[1,"card"],[1,"card-body"],[4,"ngFor","ngForOf"],["id","formDeVale","name","formDeVale",3,"formGroup","ngSubmit"],[1,"mb-4","d-grid","gap-2","mx-auto","text-center"],["for","proveedor"],["class","btn-alerta miDiv",4,"ngIf"],["role","group","aria-label","Basic mixed styles example",1,"btn-group"],["type","radio","name","tipo","id","tipo1","autocomplete","off","formControlName","tipo",1,"btn-check",3,"value","click"],["for","tipo1",1,"btn","btn-outline-dark"],["type","radio","name","tipo","id","tipo2","autocomplete","off","formControlName","tipo",1,"btn-check",3,"value","click"],["for","tipo2",1,"btn","btn-outline-primary"],[1,"col-sm-3","mb-4"],[1,"text-danger"],["formControlName","proveedor","placeholder","Escriba o seleccione","labelForId","proveedor",3,"selectOnTab"],[3,"value",4,"ngFor","ngForOf"],[1,"invalid-feedback"],[4,"ngIf"],[4,"ngIf","ngIfElse"],["tipo",""],[1,"col-sm-4","mb-4"],["for","direccion"],["row","3","maxlength","750","placeholder","Concepto","formControlName","concepto",1,"form-control"],[1,"col-sm-2"],[1,"d-grid","gap-2","mx-auto","text-center"],["type","submit","form","formDeVale",1,"btn","btn-primary","w-sm"],["class","row",4,"ngIf"],["role","document"],["content",""],["role","alert",3,"class",4,"ngIf"],["role","alert"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"btn-alerta","miDiv"],["class","mdi mdi-lightbulb-on-outline custom-cursor","ngbTooltip","Mostrar Ayuda",3,"click",4,"ngIf"],["ngbTooltip","Mostrar Ayuda",1,"mdi","mdi-lightbulb-on-outline","custom-cursor",3,"click"],[3,"value"],["for","cantidad"],["id","cantidad","name","cantidad","type","text","formControlName","cantidad","placeholder","Cantidad",1,"form-control"],["for","total_monetario"],["id","total_monetario","name","total_monetario","type","text","formControlName","total_monetario","placeholder","Total monetario",1,"form-control"],[1,"row","mb-2","align-items-center"],[1,"col-sm-3"],[1,"search-box","me-2","mb-2","d-inline-block"],[1,"position-relative"],["type","text","placeholder","Buscar...",1,"form-control",3,"ngModel","ngModelChange"],[1,"bx","bx-search-alt","search-icon"],[1,"col-sm-3","mx-auto","text-center"],[1,"badge","bg-dark"],[1,"badge","bg-primary"],[1,"text-sm-end"],["type","button",1,"btn","btn-primary","btn-rounded",3,"click"],[3,"vales","queryString"],["role","alert",1,"alert","alert-info"],[1,"modal-header"],[1,"modal-title","mt-0"],["class","btn-alerta",4,"ngIf"],["type","button","aria-hidden","true",1,"btn-close",3,"click"],[1,"modal-body"],["id","formUsuario","name","formUsuario",3,"formGroup","ngSubmit"],[1,"mb-4","col-md-12"],["for","nombre"],[1,"text-success"],["id","nombre","name","nombre","maxlength","200","minlength","2","type","text","placeholder","Omita @ues.edu.sv","formControlName","nombre",1,"form-control",3,"keyup"],["for","clave"],[1,"input-group","auth-pass-inputgroup"],["type","password","formControlName","clave","placeholder","Digite contrase\xf1a","aria-label","Password","aria-describedby","password-addon",1,"form-control",3,"type"],["type","button","id","password-addon",1,"btn","btn-light","ms-0",3,"click"],[1,"modal-footer"],["type","submit","form","formUsuario",1,"btn","btn-primary","w-sm","me-2","position-relative"],[1,"position-absolute","top-0","start-100","translate-middle","badge","rounded-pill","bg-warning"],[1,"visually-hidden"],[1,"position-absolute","top-100","start-0","translate-middle","badge","rounded-pill","bg-success"],[1,"btn","btn-dark","w-sm",3,"click"],[1,"btn-alerta"],["class","mdi mdi-18px mdi-lightbulb-on-outline custom-cursor","ngbTooltip","Mostrar Ayuda",3,"click",4,"ngIf"],["ngbTooltip","Mostrar Ayuda",1,"mdi","mdi-18px","mdi-lightbulb-on-outline","custom-cursor",3,"click"]],template:function(t,a){if(1&t&&(e._UZ(0,"app-loader"),e.TgZ(1,"div",0),e._UZ(2,"app-page-title",1),e.TgZ(3,"div",2),e.TgZ(4,"div",3),e.TgZ(5,"div",4),e.TgZ(6,"div",5),e.YNc(7,O,2,1,"div",6),e.TgZ(8,"form",7),e.NdJ("ngSubmit",function(){return a.generarVales()}),e.TgZ(9,"div",2),e.TgZ(10,"div",8),e.TgZ(11,"label",9),e._uU(12,"Elija el tipo de movimiento: "),e.YNc(13,j,2,1,"div",10),e.qZA(),e.TgZ(14,"div",11),e.TgZ(15,"input",12),e.NdJ("click",function(){return a.cambiartipo1()}),e.qZA(),e.TgZ(16,"label",13),e._uU(17,"Por cantidad de Vales"),e.qZA(),e.TgZ(18,"input",14),e.NdJ("click",function(){return a.cambiartipo0()}),e.qZA(),e.TgZ(19,"label",15),e._uU(20,"Por Total Monetario de Vales"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(21,"div",2),e.TgZ(22,"div",16),e.TgZ(23,"label",9),e._uU(24,"Abonar a: "),e.TgZ(25,"span",17),e._uU(26,"*"),e.qZA(),e.qZA(),e.TgZ(27,"ng-select",18),e.YNc(28,Q,2,2,"ng-option",19),e.qZA(),e.TgZ(29,"div",20),e.YNc(30,Y,2,0,"span",21),e.qZA(),e.qZA(),e.TgZ(31,"div",16),e.YNc(32,E,10,5,"ng-container",22),e.YNc(33,H,9,5,"ng-template",null,23,e.W1O),e.qZA(),e.TgZ(35,"div",24),e.TgZ(36,"label",25),e._uU(37,"Descripci\xf3n: "),e.TgZ(38,"span",17),e._uU(39,"*"),e.qZA(),e.qZA(),e._UZ(40,"textarea",26),e.TgZ(41,"div",20),e.YNc(42,z,2,0,"span",21),e.YNc(43,X,2,0,"span",21),e.YNc(44,K,2,0,"span",21),e.qZA(),e.qZA(),e.TgZ(45,"div",27),e.TgZ(46,"label"),e._uU(47,"Generar Vales"),e.qZA(),e.TgZ(48,"div",28),e.TgZ(49,"button",29),e._uU(50," Obtener Lista "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(51,ee,27,11,"div",30),e.YNc(52,le,43,21,"ng-template",31,32,e.W1O),e.qZA()),2&t){const n=e.MAs(34);let i;e.xp6(2),e.Q6J("breadcrumbItems",a.breadCrumbItems),e.xp6(5),e.Q6J("ngForOf",a.alerts),e.xp6(1),e.Q6J("formGroup",a.formularioGeneral),e.xp6(5),e.Q6J("ngIf",a.alerts),e.xp6(2),e.Q6J("value",1),e.xp6(3),e.Q6J("value",0),e.xp6(9),e.Tol(a.esCampoValido("proveedor")),e.Q6J("selectOnTab",!0),e.xp6(1),e.Q6J("ngForOf",a.listProveedor),e.xp6(2),e.Q6J("ngIf",null==(i=a.formularioGeneral.get("proveedor"))||null==i.errors?null:i.errors.required),e.xp6(2),e.Q6J("ngIf",1==a.formularioGeneral.get("tipo").value)("ngIfElse",n),e.xp6(8),e.Tol(a.esCampoValido("concepto")),e.xp6(2),e.Q6J("ngIf",a.formularioGeneral.get("concepto").hasError("required")),e.xp6(1),e.Q6J("ngIf",a.formularioGeneral.get("concepto").hasError("minlength")),e.xp6(1),e.Q6J("ngIf",a.formularioGeneral.get("concepto").hasError("maxlength")),e.xp6(7),e.Q6J("ngIf",0!=a.listDatos.length)}},directives:[y.R,w.V,c.sg,s._Y,s.JL,s.sg,c.O5,s._,s.Fj,s.JJ,s.u,T.w9,s.nD,Z._L,T.jq,s.On,N,s.wO],pipes:[c.H9],styles:["ng-select.is-invalid[_ngcontent-%COMP%]{box-shadow:0 0 0 1px #f46a6a;border-radius:.25rem}ng-select.is-valid[_ngcontent-%COMP%]{box-shadow:0 0 0 1px #34c38f;border-radius:.25rem}.miDiv[_ngcontent-%COMP%]{float:right;height:15px}button.btn-close[_ngcontent-%COMP%]{margin-left:5px}"]}),o})()}];let ue=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[_.Bz.forChild(ce)],_.Bz]}),o})();var de=l(63091);let pe=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[c.ez,ue,s.u5,de.v,x.h,s.UX,b.JX,Z.IJ,T.A0]]}),o})()},34576:(C,g,l)=>{l.d(g,{R:()=>h});var c=l(83668),_=l(34099);let f=(()=>{class d{constructor(){this.isLoading=new _.X(!1)}}return d.\u0275fac=function(p){return new(p||d)},d.\u0275prov=c.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"}),d})();var s=l(86019);function v(d,e){1&d&&(c.TgZ(0,"div",1),c.TgZ(1,"div",2),c.TgZ(2,"div",3),c._UZ(3,"div",4),c._UZ(4,"div",4),c._UZ(5,"div",4),c._UZ(6,"div",4),c._UZ(7,"div",4),c._UZ(8,"div",4),c.qZA(),c.qZA(),c.qZA())}let h=(()=>{class d{constructor(p){this.loaderService=p,this.loading=!0,this.loaderService.isLoading.subscribe(m=>{setTimeout(()=>{this.loading=m},1500)})}ngOnInit(){}}return d.\u0275fac=function(p){return new(p||d)(c.Y36(f))},d.\u0275cmp=c.Xpm({type:d,selectors:[["app-loader"]],decls:1,vars:1,consts:[["id","preloader",4,"ngIf"],["id","preloader"],["id","status"],[1,"spinner-chase"],[1,"chase-dot"]],template:function(p,m){1&p&&c.YNc(0,v,9,0,"div",0),2&p&&c.Q6J("ngIf",m.loading)},directives:[s.O5],styles:[""]}),d})()}}]);